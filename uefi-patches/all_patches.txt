# Patch string format
# FileGuid SectionType PatchType:FindPatternOrOffset:ReplacePattern 
# Please ensure that the latest symbol in patch string is space

# Possible section types:
#  PE32 image                    10
#  Position-independent code     11
#  TE Image                      12
#  DXE Dependency                13
#  Version information           14
#  User interface string         15
#  16-bit code                   16
#  Guided freeform               18
#  Raw data                      19
#  PEI Dependency                1B
#  SMM Dependency                1C
# Please do not try another section types, it can make the resulting image broken

# Possible patch types:
#  P - pattern-based, first parameter is a pattern to find, second - a pattern to replace
#  O - offset-based, first parameter is hexadecimal offset, second - a pattern to replace
# Patterns can have . as "any possible value" symbol

#----------------------------------------------------------------------------------
# OSX CPU Power Management patches
# Remove lock from MSR 0xE2 register
#----------------------------------------------------------------------------------

# PowerMgmtDxe | Haswell
F7731B4C-58A2-4DF4-8980-5645D39ECE58 10 P:75080FBAE80F89442430:EB080FBAE80F89442430 

# PowerMgmtDxe | Haswell-E
F7731B4C-58A2-4DF4-8980-5645D39ECE58 10 P:0FBA6C24380F:0FBA7424380F 

# PowerManagement | Sandy Bridge with ME 8.xx, Ivy Bridge 
8C783970-F02A-4A4D-AF09-8797A51EEC8D 10 P:75080FBAE80F89442430:EB080FBAE80F89442430 

# PowerManagement | New SB-E/IB-E 
8C783970-F02A-4A4D-AF09-8797A51EEC8D 10 P:0FBA6C24380F:0FBA7424380F 

# CpuPei | Sandy Bridge with ME 7.xx, old SB-E/IB-E
2BB5AFA9-FF33-417B-8497-CB773C2B93BF 10 P:800018EB050D0080:000018EB050D0000 

# PpmInitialize | Broadwell-E
3FFCAE95-23CF-4967-94F5-16352F68E43B 10 P:0FBA6C24400F:0FBA7424400F 

# SiInit | Skylake
299D6F8B-2EC9-4E40-9EC6-DDAA7EBF5FD9 10 P:75080D00800000:EB080D00800000 
299D6F8B-2EC9-4E40-9EC6-DDAA7EBF5FD9 12 P:75080D00800000:EB080D00800000 

# SiInit | Kaby Lake
299D6F8B-2EC9-4E40-9EC6-DDAA7EBF5FD9 10 P:81E10080000033C1:9090909090909090 
299D6F8B-2EC9-4E40-9EC6-DDAA7EBF5FD9 12 P:81E10080000033C1:9090909090909090 

# PpmInitialize | Skylake-X
3FFCAE95-23CF-4967-94F5-16352F68E43B 10 P:742CB9E2000000:752CB9E2000000 

# CpuInitPei | Skylake-X
01359D99-9446-456D-ADA4-50A711C03ADA 12 P:BE0080000023CE0B:BE0000000023CE0B 

# PpmInitialize | 0xE2 & 0x1AA unlock for C422 Chipsets & Some X299 Chipsets
3FFCAE95-23CF-4967-94F5-16352F68E43B 10 P:4889442430....0FBAE8:4889442430....0FBAE0 
3FFCAE95-23CF-4967-94F5-16352F68E43B 10 P:4889442450....0FBAE8:4889442450....0FBAE0 

# PpmInitialize | 0xE2 & 0x1AA unlock for C620 Chipsets
3FFCAE95-23CF-4967-94F5-16352F68E43B 10 P:480BC2BA00200000:480BC2BA00000000 
3FFCAE95-23CF-4967-94F5-16352F68E43B 10 P:480BC2BA00800000:480BC2BA00000000# PciHostBridge | Remove <4GB BAR size limit in SubmitResources (Sandy/Ivy Bridge)
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:77B6488B0F493BCF73AE48FFC1E81BFFFFFF488B1748FFC8483BD0759B:669066909066909066906690909090669090488B176690906690906690

# PciHostBridge | Replace 16GB MMIO region with complete use of 64GB physical address space (Sandy/Ivy Bridge). MAY REQUIRE DSDT MODIFICATION
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:48BA000000000100000049B80000000004000000483BDA8BCE480F47D3:49B800000000100000004929D8909090909090906690908BCE4889DA90

# PciHostBridge | Replace 64GB MMIO region with complete use of 512GB physical address space (Skylake/Kaby Lake/Coffee Lake)
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:48BB0000000008000000488B004823C1483BC3763C........................................................................................................................................................................................................488B05........:48BE000000007F000000488B184821CB4829DEEB64........................................................................................................................................................................................................488B05........

# PciBus | Remove <16GB BAR size limit (Sandy/Ivy Bridge/Haswell/Broadwell)
3C1DE39F-D207-408A-AACC-731CFB7F1DD7 10 P:B8FFFFFFFF030000004C3B:B8FFFFFFFFFFFFFF004C3B

# PciBus | Remove <64GB BAR size limit (Skylake/Kaby Lake/Coffee Lake)
3C1DE39F-D207-408A-AACC-731CFB7F1DD7 10 P:B800000000100000004C3B:B8FFFFFFFFFFFFFF004C3B

# PciBus | Don't downgrade 64-bit BARs to 32-bit (Haswell/Broadwell)
3C1DE39F-D207-408A-AACC-731CFB7F1DD7 10 P:833E067506C70604000000833E077506C70605000000:66906690669066906690669066906690669066906690

# PciBus | Don't downgrade 64-bit BARs to 32-bit (by @Mak3rde)
3C1DE39F-D207-408A-AACC-731CFB7F1DD7 10 P:C70605000000833E067506C70604000000BE01000000:909090909090833E067506909090909090BE01000000

# AMI APTIO V NvramSmiDxe (Socket 2011-v3 MB: C612, X99) NVRAM whitelist unlock
54B070F3-9EB8-47CC-ADAF-39029C853CBB 10 P:0F84B300000041F6:90E9B300000041F6

# NvramSmi NVRAM whitelist unlock (by @vit9696)
842A454A-75E5-408B-8B1C-36420E4E3F21 10 P:9801000072:0000000072

# PciHostBridge | Fix AddMemorySpace call (Sandy/Ivy Bridge)
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:040000004823C1483BC2480F47D04C2BC27411:100000004823C1483BC2480F47D04C2BC26690

# Runtime | Remove 4GB limit for CpuIo2
CBC59C4A-383A-41EB-A8EE-4498AEA567E4 10 P:B9FFFFFFFF490FAFC14903C0483BC1776C:6690669090490FAFC14903C06690906690

# PciHostBridge | Remove 4GB limit for PciRootBridgeIo.Mem
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:493B4C24C0771B:66906690669090
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:493B4C24C0771C:66906690669090

# IvtQpiandMrcInit | Extend MMIOH limit to fix Above 4G Decoding (X79), untested with multi CPU
#5C08C7C8-24C2-4400-9627-CF2869421E06 10 P:0FB796....00006685D2:BA0020000066906685D2
# NBPEI | Correct EFI_HOB_TYPE_CPU SizeOfMemorySpace from 36-bit to 39-bit (512GB) (Haswell/Broadwell)
79AA6086-035A-4AD9-A89A-A6D5AA27F0E2 10 P:8B45FCC64008248B45FCC6400910:8B45FCC64008278B45FCC6400910

# PciHostBridge | Replace 32/48GB - 63GB MMIO region with complete use of 512GB physical address space (Haswell/Broadwell)
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:BB00000000080000004823C1483BC3763C48BB000000000C000000....................................................................................................................................................................................................488B05........:BE000000007F0000004823C14889C34829DEEB6966906690669090....................................................................................................................................................................................................488B05........
# PciHostBridge | Replace 8-16GB MMIO region with complete use of 512GB physical address space (Haswell/Broadwell). MAY REQUIRE DSDT MODIFICATION
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:080000004823C1483BC3770C48BE0000000004000000EB7A48BB000000000C000000483BC3770C48BE0000000002000000EB5F48BB000000000E000000483BC3770C48BE0000000001000000EB4448BB000000000F000000483BC37707BE00000080EB2E48BB000000800F000000483BC37707BE00000040EB1848BB000000C00F000000483BC30F87A4FEFFFFBE00000020:010000004821C84839D8480F47D848BE000000007F0000004829DE9090909090909066909066906690909090909090909066906690909090909090909066909066906690909090909090909066906690909090909090909066909066909090909090669066909090909090909090669090669090909090906690669090909090909090906690909090909090909090909090
# replace old patch
8D6756B9-E55E-4D6A-A3A5-5E4D72DDF772 10 P:010000004821C84839D8480F47D848BE00000000100000004829DE9090909090909066909066906690909090909090909066906690909090909090909066909066906690909090909090909066906690909090909090909066909066909090909090669066909090909090909090669090669090909090906690669090909090909090906690909090909090909090909090:010000004821C84839D8480F47D848BE000000007F0000004829DE9090909090909066909066906690909090909090909066906690909090909090909066909066906690909090909090909066906690909090909090909066909066909090909090669066909090909090909090669090669090909090906690669090909090909090906690909090909090909090909090
